<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pmm Corporation Tools</title>
  <style>
    :root{font-family:Inter, Roboto, system-ui, -apple-system, 'Segoe UI', sans-serif}
    body{
      margin:0;
      padding:0;
      background: #0f172a;
      color:#e6eef8;
      position: relative;
      overflow-x: hidden;
      min-height: 100vh;
      overscroll-behavior: none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }

    /* FIREWORKS CANVAS - sits behind UI but above rgb background */
    #fireworksCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1; /* above rgb-bg (-2) but below UI (default 0/1) */
      pointer-events: none; /* make UI clickable ‚Äî script will enable pointer events when needed */
    }

    /* Particle Background - Reduced for mobile */
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -3; /* behind fireworks */
      will-change: transform;
    }

    /* Advanced RGB Background Effects - Optimized for mobile */
    .rgb-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2; /* behind fireworks but above particles */
      overflow: hidden;
      will-change: transform;
    }

    .rgb-circle {
      position: absolute;
      border-radius: 50%;
      filter: blur(40px);
      opacity: 0.15;
      animation: float-mobile 30s infinite ease-in-out;
      will-change: transform;
    }

    .circle-1 {
      width: 200px;
      height: 200px;
      background: #ff0055;
      top: 10%;
      left: 10%;
      animation-delay: 0s;
      box-shadow: 0 0 50px 25px rgba(255, 0, 85, 0.2);
    }

    .circle-2 {
      width: 250px;
      height: 250px;
      background: #00aaff;
      top: 60%;
      left: 70%;
      animation-delay: -7s;
      animation-duration: 35s;
      box-shadow: 0 0 60px 30px rgba(0, 170, 255, 0.2);
    }

    .circle-3 {
      width: 225px;
      height: 225px;
      background: #00ff88;
      top: 30%;
      left: 80%;
      animation-delay: -14s;
      animation-duration: 40s;
      box-shadow: 0 0 55px 28px rgba(0, 255, 136, 0.2);
    }

    .circle-4 {
      width: 175px;
      height: 175px;
      background: #ffaa00;
      top: 70%;
      left: 20%;
      animation-delay: -10s;
      animation-duration: 33s;
      box-shadow: 0 0 45px 23px rgba(255, 170, 0, 0.2);
    }

    @keyframes float-mobile {
      0%, 100% { transform: translate(0, 0) scale(1) rotate(0deg); }
      25% { transform: translate(40px, 30px) scale(1.05) rotate(45deg); }
      50% { transform: translate(0, 60px) scale(0.95) rotate(90deg); }
      75% { transform: translate(-40px, 30px) scale(1.02) rotate(135deg); }
    }

    @media (prefers-reduced-motion: reduce) {
      .rgb-circle { animation: none; }
      .glowing-title { animation: none; }
      .glowing-title::after { animation: none; }
      button::before, .help-btn::before, .convert-btn::before, .copy-btn::before { animation: none; }
      .tabs::before, .hex-converter-card::before, .enhanced-card::before { animation: none; }
    }

    .glowing-title {
      font-weight: 800;
      background: linear-gradient(90deg, #ff0055, #ffaa00, #00ff88, #00aaff, #ff0055);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: rgb-shift 6s ease infinite;
      text-shadow: 0 0 10px rgba(255, 0, 85, 0.3);
      position: relative;
      display: inline-block;
      font-size: clamp(1.5rem, 4vw, 2rem);
      will-change: background-position;
    }

    .glowing-title::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(90deg, #ff0055, #ffaa00, #00ff88, #00aaff, #ff0055);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: rgb-shift 6s ease infinite reverse;
      opacity: 0.3;
      filter: blur(3px);
      z-index: -1;
    }

    @keyframes rgb-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .tabs {
      display: flex;
      background: rgba(7, 16, 39, 0.95);
      padding: 0 5px;
      border-bottom: 1px solid #23313f;
      position: relative;
      backdrop-filter: blur(10px);
      z-index: 10;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
      flex-wrap: wrap;
      contain: layout style paint;
    }

    .tabs::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 2px;
      background: linear-gradient(90deg, #ff0055, #ffaa00, #00ff88, #00aaff);
      background-size: 300% 100%;
      animation: rgb-shift 8s ease infinite;
    }

    .tab {
      padding: 10px 12px;
      background: transparent;
      border: none;
      color: #9fb0c8;
      cursor: pointer;
      font-size: clamp(0.8rem, 3vw, 0.9rem);
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      font-weight: 600;
      flex: 1;
      min-width: 100px;
      text-align: center;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .tab::before {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
      transition: left 0.5s;
    }

    .tab:hover::before, .tab:active::before { left: 100%; }

    .tab.active {
      color: #fff;
      border-bottom-color: #1f6feb;
      background: linear-gradient(to bottom, rgba(31, 111, 235, 0.15), transparent);
      text-shadow: 0 0 8px rgba(31, 111, 235, 0.5);
    }

    .tab:hover, .tab:active {
      color: #e6eef8;
      background: rgba(31, 111, 235, 0.08);
      text-shadow: 0 0 6px rgba(255,255,255,0.4);
    }

    .help-btn {
      position: relative;
      margin: 8px auto;
      padding: 12px 16px;
      background: linear-gradient(135deg, #1f6feb, #0d5fd9);
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-size: clamp(0.8rem, 3vw, 0.9rem);
      font-weight: 600;
      transition: all 0.3s ease;
      z-index: 1;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(31, 111, 235, 0.2);
      display: block;
      width: fit-content;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .help-btn::before {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .help-btn:hover::before, .help-btn:active::before { left: 100%; }

    .help-btn:hover, .help-btn:active {
      background: linear-gradient(135deg, #0d5fd9, #1f6feb);
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(31, 111, 235, 0.4);
    }

    .tool-container {
      display: none;
      padding: 12px;
      position: relative;
      z-index: 1;
      contain: layout style paint;
    }

    .tool-container.active { display: block; animation: fadeIn 0.4s ease; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .wrap {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 12px;
    }

    @media (min-width: 768px) { .wrap { grid-template-columns: 1fr 1fr; } }

    textarea{
      width:100%;
      height:150px;
      padding:10px;
      border-radius:8px;
      border:1px solid #23313f;
      background:#071027;
      color:inherit;
      font-family:monospace;
      resize:vertical;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      font-size: clamp(0.8rem, 3vw, 0.9rem);
      -webkit-overflow-scrolling: touch;
      contain: layout style;
    }

    textarea:focus {
      border-color: #1f6feb;
      box-shadow: 0 0 0 2px rgba(31, 111, 235, 0.2), 0 4px 12px rgba(31, 111, 235, 0.15);
      transform: translateY(-1px);
    }

    .controls{
      display:flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      margin-top: 12px;
    }

    button {
      background: #1f6feb;
      border: 0;
      padding: 10px 12px;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      z-index: 1;
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 600;
      box-shadow: 0 2px 8px rgba(31, 111, 235, 0.2);
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      flex: 1;
      min-width: fit-content;
      justify-content: center;
      min-height: 44px;
    }

    button::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(90deg, #ff0055, #ffaa00, #00ff88, #00aaff, #ff0055);
      background-size: 400% 400%;
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s;
    }

    button:hover::before, button:active::before {
      opacity: 1;
      animation: rgb-flow 4s linear infinite;
    }

    button:hover, button:active { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(31, 111, 235, 0.3); }
    button:active { transform: translateY(0); }

    @keyframes rgb-flow { 0% { background-position: 0% 50%; } 100% { background-position: 400% 50%; } }

    button.ghost{ background:transparent; border:2px solid #2b445c; box-shadow: none; }
    button.ghost:hover, button.ghost:active { border-color: #1f6feb; box-shadow: 0 0 10px rgba(31, 111, 235, 0.4); background: rgba(31, 111, 235, 0.1); }

    .result{ margin-top:12px; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .hex-line{ font-family:monospace; white-space:pre-wrap; word-break:break-all; font-size: clamp(0.75rem, 2.5vw, 0.85rem); }
    .same{background:transparent}
    .removed{background:#582020;color:#ffd6d6;padding:2px 4px;border-radius:4px; box-shadow: 0 1px 2px rgba(0,0,0,0.15);}
    .added{background:#163a20;color:#c8ffd8;padding:2px 4px;border-radius:4px; box-shadow: 0 1px 2px rgba(0,0,0,0.15);}
    .changed-old{background:#6b2b2b;color:#ffd8d8;padding:2px 4px;border-radius:3px; box-shadow: 0 1px 2px rgba(0,0,0,0.15);}
    .changed-new{background:#1b5b2b;color:#cfffdf;padding:2px 4px;border-radius:3px; box-shadow: 0 1px 2px rgba(0,0,0,0.15);}

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      border-radius: 6px;
      overflow: hidden;
      font-size: clamp(0.75rem, 2.5vw, 0.85rem);
      min-width: 500px;
    }

    th,td{
      padding:6px 8px;
      border-bottom:1px solid #1a2b3a;
      text-align:left;
      font-family:monospace;
      white-space: nowrap;
    }

    th{
      background:linear-gradient(to bottom, #071826, #0a1f33);
      color:#9fc7ff;
      font-weight: 700;
    }

    .meta{ font-size: clamp(0.8rem, 3vw, 0.9rem); color:#9fb0c8; margin-bottom:8px; }
    .footer{ margin-top:10px; color:#9fb0c8; font-size: clamp(0.8rem, 3vw, 0.9rem); }
    .small{ font-size: clamp(0.8rem, 3vw, 0.9rem); color:#9fb0c8; }
    .badge{ display:inline-block; padding:4px 8px; border-radius:6px; background:linear-gradient(to bottom, #0b2b3a, #0d3245); color:#bfe8ff; margin-left:4px; font-weight: 600; box-shadow: 0 1px 3px rgba(0,0,0,0.2); font-size: clamp(0.75rem, 2.5vw, 0.85rem); }

    .wrap-single{ display:flex; gap: 6px; flex-wrap:wrap; margin-top: 8px; }
    input[type=file]{display:none}

    .toast{
      position:fixed;
      bottom:20px;
      right:20px;
      left: 20px;
      background:linear-gradient(135deg, #1f6feb, #0d5fd9);
      color:white;
      padding:12px 16px;
      border-radius:8px;
      opacity:0;
      transition:all 0.3s ease;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(31, 111, 235, 0.3);
      font-weight: 600;
      text-align: center;
      max-width: 300px;
      margin: 0 auto;
      contain: layout style paint;
    }

    .toast.show{ opacity:1; transform: translateY(-5px); }

    .visual-comparison { margin-bottom: 16px; border: 1px solid #23313f; border-radius: 8px; padding: 10px; background: #071027; box-shadow: 0 2px 10px rgba(0,0,0,0.15); overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .question-mark { background: #ffeb3b; color: #333; padding: 2px 4px; border-radius: 3px; font-weight: bold; box-shadow: 0 1px 2px rgba(0,0,0,0.15); }

    .hex-converter-card {
      max-width: 100%;
      margin: 0 auto;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      padding: 16px;
      box-shadow: 0 4px 20px rgba(2,6,23,0.6);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.08);
      position: relative;
      overflow: hidden;
    }

    @media (min-width: 768px) {
      .hex-converter-card { max-width: 560px; padding: 20px; }
    }

    .hex-converter-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: linear-gradient(90deg, #ff0055, #ffaa00, #00ff88, #00aaff);
      background-size: 300% 100%;
      animation: rgb-shift 6s ease infinite;
    }

    .hex-converter-card::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(135deg, rgba(255,0,85,0.05), rgba(0,170,255,0.05), rgba(0,255,136,0.05));
      z-index: -1;
      opacity: 0.7;
    }

    .hex-converter-card h1 { font-size: clamp(1.2rem, 4vw, 1.5rem); margin: 0 0 10px; }
    .hex-converter-card .subtitle { margin: 0 0 15px; color: #c9e0ffcc; font-size: clamp(0.8rem, 3vw, 0.9rem); line-height: 1.5; }

    .row{ display:flex; flex-direction: column; gap: 8px; align-items: stretch; }
    @media (min-width: 480px) {
      .row { flex-direction: row; align-items: center; }
    }

    input[type=text]{ flex:1; padding:12px 14px; border-radius:8px; border:1px solid rgba(255,255,255,0.08); background:rgba(255,255,255,0.05); color:inherit; font-size: clamp(0.9rem, 3vw, 1rem); transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
    input[type=text]:focus { border-color: #1f6feb; box-shadow: 0 0 0 2px rgba(31, 111, 235, 0.2), 0 4px 12px rgba(31, 111, 235, 0.15); transform: translateY(-1px); }

    .convert-btn{ padding:12px 16px; border-radius:8px; border:0; background:linear-gradient(135deg, #0ea5a4, #0d9488); color:#fff; cursor:pointer; font-weight:600; position: relative; overflow: hidden; z-index: 1; display: flex; align-items: center; gap: 6px; box-shadow: 0 2px 10px rgba(14, 165, 164, 0.3); font-size: clamp(0.8rem, 3vw, 0.9rem); justify-content: center; min-height: 44px; }
    .convert-btn::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, #ff0055, #ffaa00, #00ff88, #00aaff, #ff0055); background-size: 400% 400%; z-index: -1; opacity: 0; transition: opacity 0.3s; }
    .convert-btn:hover::before, .convert-btn:active::before { opacity: 1; animation: rgb-flow 4s linear infinite; }
    .convert-btn:hover, .convert-btn:active { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(14, 165, 164, 0.4); }
    .convert-btn:active{transform:translateY(0)}

    .converter-result{ margin-top:12px; padding:12px; border-radius:8px; background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.06); transition: all 0.3s ease; font-size: clamp(0.9rem, 3vw, 1rem); font-weight: 600; min-height: 24px; word-break: break-all; }
    .converter-result:hover { border-color: rgba(255,255,255,0.12); box-shadow: 0 4px 12px rgba(0,0,0,0.2); transform: translateY(-1px); }
    .muted{ color:#9fb6d9; font-size: clamp(0.8rem, 3vw, 0.9rem); }
    .error{ color:#ffd2d2; background:linear-gradient(135deg, rgba(255,0,0,0.1), rgba(255,100,100,0.1)); padding:10px; border-radius:8px; margin-top:8px; border: 1px solid rgba(255,100,100,0.3); box-shadow: 0 2px 8px rgba(255,0,0,0.1); font-size: clamp(0.8rem, 3vw, 0.9rem); }

    .copy-btn{ margin-left:6px; padding:10px 12px; border-radius:8px; border:0; background:linear-gradient(135deg, #64748b, #475569); color:#fff; cursor:pointer; position: relative; overflow: hidden; z-index: 1; display: flex; align-items: center; gap: 6px; font-weight: 600; box-shadow: 0 2px 8px rgba(100, 116, 139, 0.3); font-size: clamp(0.8rem, 3vw, 0.9rem); min-height: 44px; }
    .copy-btn::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, #ff0055, #ffaa00, #00ff88, #00aaff, #ff0055); background-size: 400% 400%; z-index: -1; opacity: 0; transition: opacity 0.3s; }
    .copy-btn:hover::before, .copy-btn:active::before { opacity: 1; animation: rgb-flow 4s linear infinite; }
    .copy-btn:hover, .copy-btn:active { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(100, 116, 139, 0.4); }

    .enhanced-card { background: rgba(255,255,255,0.05); border-radius: 10px; padding: 16px; box-shadow: 0 4px 20px rgba(2,6,23,0.6); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.08); margin-bottom: 16px; position: relative; overflow: hidden; }
    @media (min-width: 768px) { .enhanced-card { padding: 20px; border-radius: 14px; } }
    .enhanced-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #ff0055, #ffaa00, #00ff88, #00aaff); background-size: 300% 100%; animation: rgb-shift 6s ease infinite; }
    .enhanced-card::after { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(255,0,85,0.05), rgba(0,170,255,0.05), rgba(0,255,136,0.05)); z-index: -1; opacity: 0.7; }

    @media (max-width: 767px) {
      .rgb-circle { animation-duration: 40s; }
      body { -webkit-overflow-scrolling: touch; }
      button, .tab { -webkit-tap-highlight-color: transparent; user-select: none; }
      * { -webkit-backface-visibility: hidden; backface-visibility: hidden; }
    }
  </style>
</head>
<body>
  <!-- Fireworks canvas (merged) -->
  <canvas id="fireworksCanvas"></canvas>

  <!-- Particle Background -->
  <div id="particles-js"></div>

  <!-- Advanced RGB Background Elements -->
  <div class="rgb-bg">
    <div class="rgb-circle circle-1"></div>
    <div class="rgb-circle circle-2"></div>
    <div class="rgb-circle circle-3"></div>
    <div class="rgb-circle circle-4"></div>
  </div>

  <!-- Advanced Navigation Tabs -->
  <div class="tabs">
    <button class="tab active" data-tool="byte-diff">üîç Byte Diff</button>
    <button class="tab" data-tool="hex-converter">üîÑ Hex Converter</button>
    <button class="help-btn" id="help-btn">‚ùì How to use</button>
  </div>

  <!-- Byte Diff Viewer -->
  <div id="byte-diff" class="tool-container active">
    <div class="enhanced-card">
      <h1 class="glowing-title">Pmm Corporation Byte Checker</h1>
      <div class="meta"><strong></strong></div>

      <div class="wrap">
        <div>
          <label class="small">üîç Search / Original</label>
          <textarea id="left" placeholder="fast value..."></textarea>
          <div class="wrap-single">
            <button id="loadLeft">üìÅ Load</button>
            <input id="fileLeft" type="file" accept=".txt" />
            <button id="clearLeft" class="ghost">üóëÔ∏è Clear</button>
            <button id="upperLeft" class="ghost">‚¨ÜÔ∏è Upper</button>
            <button id="lowerLeft" class="ghost">‚¨áÔ∏è Lower</button>
            <button id="copyLeft" class="ghost">üìã Copy</button>
          </div>
        </div>
        <div>
          <label class="small">üîÑ Replace / New</label>
          <textarea id="right" placeholder="second value..."></textarea>
          <div class="wrap-single">
            <button id="loadRight">üìÅ Load</button>
            <input id="fileRight" type="file" accept=".txt" />
            <button id="clearRight" class="ghost">üóëÔ∏è Clear</button>
            <button id="upperRight" class="ghost">‚¨ÜÔ∏è Upper</button>
            <button id="lowerRight" class="ghost">‚¨áÔ∏è Lower</button>
            <button id="copyRight" class="ghost">üìã Copy</button>
            <button id="markChanges" class="ghost">‚ùì Mark ??</button>
          </div>
        </div>
      </div>

      <div class="controls">
        <button id="compare">‚ö° Compare</button>
        <button id="visual" class="ghost">üëÅÔ∏è Visual</button>
        <button id="copyCsv" class="ghost">üìä CSV</button>
        <div style="flex:1"></div>
        <div class="small">Bytes: <span id="countLeft">0</span> ‚Üí <span id="countRight">0</span></div>
      </div>
    </div>

    <div id="visual-result" class="visual-comparison"></div>
    <div id="result" class="result"></div>
  </div>

  <!-- Hex Converter -->
  <div id="hex-converter" class="tool-container">
    <div class="hex-converter-card">
      <h1 class="glowing-title">Pmm Corporation || Hex ‚Üî Decimal</h1>
      <p class="subtitle">Type: <code>0xA2</code> ‚Üí <strong>162</strong>, or <code>162</code> ‚Üí <strong>0xA2</strong></p>

      <div class="row">
        <input id="hexInput" type="text" placeholder="Type: 0xA2 or 162" autofocus />
        <button id="convertBtn" class="convert-btn">üîÑ Convert</button>
        <button id="clearHexBtn" class="copy-btn">üóëÔ∏è Clear</button>
      </div>

      <div id="hexResult" class="converter-result muted">Results will appear here</div>
      <div id="hexError" class="error" style="display:none"></div>

      <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:12px;align-items:center">
        <button id="copyHexResult" class="copy-btn">üìã Copy</button>
        <div class="muted">Auto-detects <code>0x</code> prefix</div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">Copied!</div>

<script>
/* --- YOUR ORIGINAL SCRIPTS (unchanged logic) --- */
/* Debounce function to limit how often a function can be called */
function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

// Particle.js for background - Optimized for mobile
document.addEventListener('DOMContentLoaded', function() {
  // Load particles.js library dynamically only if needed
  if (window.innerWidth > 768) { // Only load on larger screens
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js';
    script.onload = function() {
      if (window.particlesJS) {
        particlesJS("particles-js", {
          particles: {
            number: { value: 40, density: { enable: true, value_area: 400 } },
            color: { value: "#ffffff" },
            shape: { type: "circle" },
            opacity: { value: 0.2, random: true },
            size: { value: 2, random: true },
            line_linked: { enable: false, distance: 150, color: "#1f6feb", opacity: 0.1, width: 1 },
            move: { enable: true, speed: 1, direction: "none", random: true, straight: false, out_mode: "out", bounce: false }
          },
          interactivity: { detect_on: "canvas", events: { onhover: { enable: false }, onclick: { enable: false }, resize: true } },
          retina_detect: true
        });
      }
    };
    document.head.appendChild(script);
  }
});

// Tab Navigation
document.addEventListener('DOMContentLoaded', function() {
  const tabs = document.querySelectorAll('.tab');

  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      const toolId = this.getAttribute('data-tool');

      // Hide all tools
      document.querySelectorAll('.tool-container').forEach(tool => {
        tool.classList.remove('active');
      });

      // Show selected tool
      document.getElementById(toolId).classList.add('active');

      // Update tabs
      document.querySelectorAll('.tab').forEach(t => {
        t.classList.remove('active');
      });
      this.classList.add('active');
    });
  });
});

// Help function
document.getElementById('help-btn').addEventListener('click', function() {
  alert(' [Pmm Corporation Byte Checker] ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶¶‡¶ø‡¶®, ‡¶§‡¶æ‡¶∞‡¶™‡¶∞‡ßá‡¶∞ ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡ßá‡¶∏ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® ‡¶¶‡¶ø‡¶®, ‡¶è‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶Æ‡ßç‡¶™‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ö‡¶æ‡¶™‡ßÅ‡¶® , ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶¶‡ßÅ‡¶á‡¶ü‡¶ø ‡¶ï‡ßã‡¶° ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶†‡¶ø‡¶ï ‡¶ï‡ßã‡¶® ‡¶ú‡¶æ‡¶Ø‡¶º‡¶ó‡¶æ‡¶Ø‡¶º ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡•§  [Hex Converter] ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá ‡¶π‡ßá‡¶ï‡ßç‡¶∏ ‡¶Ö‡¶¨‡¶∏‡ßá‡¶ü ‡¶¶‡¶ø‡¶≤‡ßá ‡¶°‡ßá‡¶∏‡¶ø‡¶Æ‡ßá‡¶≤ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶Ü‡¶∞ ‡¶°‡ßá‡¶∏‡¶ø‡¶Æ‡ßá‡¶≤ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶¶‡¶ø‡¶≤‡ßá  ‡¶π‡ßá‡¶ï‡ßç‡¶∏ ‡¶Ö‡¶¨‡¶∏‡ßá‡¶ü ‡¶™‡¶æ‡¶¨‡ßá‡¶®                                                                                                                                   In case of using [Pmm Corporation Byte Checker] enter the search pattern in the first box, enter the replace pattern in the second box, now press the compare button, then you will see below where exactly the change has been made in the two codes. In case of using [Hex Converter], if you give the hex offset, you will get the decimal number and if you give the decimal number, you will get the hex offset.');
});

/* --- Byte diff and hex converter logic (copied from your original code) --- */
/* (For brevity in this reply the functions below are the same as your original ones) */

function normalizeHex(s){
  if(!s) return '';
  return s.replace(/0x/gi,'')
          .replace(/[\r\n\t,]+/g,' ')
          .replace(/[^0-9a-fA-F ]+/g,' ')
          .trim()
          .replace(/ +/g,' ');
}

function parseBytes(s){
  s = normalizeHex(s);
  if(!s) return [];
  const parts = s.split(' ');
  const bytes = [];
  for(const p of parts){
    if(p==='') continue;
    if(p.length===1) bytes.push(parseInt(p,16));
    else if(p.length%2===0){
      if(p.length>2){for(let i=0;i<p.length;i+=2) bytes.push(parseInt(p.substr(i,2),16));}
      else bytes.push(parseInt(p,16));
    } else {
      const clean = p.length%2?('0'+p):p;
      for(let i=0;i<clean.length;i+=2) bytes.push(parseInt(clean.substr(i,2),16));
    }
  }
  return bytes.filter(x=>Number.isFinite(x) && x>=0 && x<=255);
}

function toHex(b){return(b===null||b===undefined)?'--':('0'+b.toString(16).toUpperCase()).slice(-2);}

function makeCsv(rows){
  const header=['index,orig,new,status'];
  const lines=rows.map(r=>`${r.index},${r.orig===null?'':toHex(r.orig)},${r.new===null?'':toHex(r.new)},${r.status}`);
  return header.concat(lines).join('\n');
}

function markChangesWithQuestionMarks(leftBytes, rightBytes, originalRightText) {
  const maxLen = Math.max(leftBytes.length, rightBytes.length);
  let result = '';
  const originalHexArray = originalRightText.split(' ').filter(x => x.trim() !== '');

  for(let i = 0; i < maxLen; i++) {
    const leftByte = i < leftBytes.length ? leftBytes[i] : null;
    const rightByte = i < rightBytes.length ? rightBytes[i] : null;
    const originalHex = i < originalHexArray.length ? originalHexArray[i] : '';

    if (leftByte === null && rightByte !== null) {
      result += '?? ';
    } else if (leftByte !== null && rightByte === null) {
      result += '-- ';
    } else if (leftByte !== null && rightByte !== null) {
      if (leftByte === rightByte) {
        result += originalHex + ' ';
      } else {
        result += '?? ';
      }
    } else {
      result += '-- ';
    }
  }
  return result.trim();
}

function renderDiff(leftBytes,rightBytes){
  const maxLen=Math.max(leftBytes.length,rightBytes.length);
  const rows=[];
  let sameCount=0,changedCount=0,addedCount=0,removedCount=0;

  for(let i=0;i<maxLen;i++){
    const a=i<leftBytes.length?leftBytes[i]:null;
    const b=i<rightBytes.length?rightBytes[i]:null;
    let status='same';
    if(a===null&&b!==null){status='added';addedCount++;}
    else if(a!==null&&b===null){status='removed';removedCount++;}
    else if(a!==null&&b!==null){if(a===b){status='same';sameCount++;}else{status='changed';changedCount++;}}
    rows.push({index:i,orig:a,new:b,status});
  }

  const container=document.createElement('div');
  const meta=document.createElement('div');meta.className='meta';
  meta.innerHTML=`<strong>Results:</strong> total ${maxLen} bytes ‚Äî <span class="badge">same ${sameCount}</span> <span class="badge">changed ${changedCount}</span> <span class="badge">added ${addedCount}</span> <span class="badge">removed ${removedCount}</span>`;
  container.appendChild(meta);

  const visualContainer = document.createElement('div');
  visualContainer.className = 'hex-line';
  visualContainer.style.marginTop = '12px';

  let leftLine='',rightLine='';
  for(let i=0;i<rows.length;i++){
    const r=rows[i];
    if(r.status==='same'){leftLine+=toHex(r.orig)+' ';rightLine+=toHex(r.new)+' ';}
    else if(r.status==='changed'){leftLine+=`<span class='changed-old'>${toHex(r.orig)}</span> `;rightLine+=`<span class='changed-new'>${toHex(r.new)}</span> `;}
    else if(r.status==='added'){leftLine+="<span class='same'>--</span> ";rightLine+=`<span class='added'>${toHex(r.new)}</span> `;}
    else if(r.status==='removed'){leftLine+=`<span class='removed'>${toHex(r.orig)}</span> `;rightLine+="<span class='same'>--</span> ";}
  }

  const preLeft=document.createElement('div');
  preLeft.innerHTML='<strong>Original (left)</strong><br/>'+leftLine;
  preLeft.style.marginTop='8px';

  const preRight=document.createElement('div');
  preRight.innerHTML='<strong>New (right)</strong><br/>'+rightLine;
  preRight.style.marginTop='6px';

  visualContainer.appendChild(preLeft);
  visualContainer.appendChild(preRight);

  const table=document.createElement('table');
  const thead=document.createElement('thead');thead.innerHTML='<tr><th>#</th><th>Original</th><th>New</th><th>Status</th></tr>';
  table.appendChild(thead);
  const tbody=document.createElement('tbody');
  for(const r of rows){
    const tr=document.createElement('tr');
    const tdIndex=document.createElement('td');tdIndex.textContent=r.index;
    const tdOrig=document.createElement('td');tdOrig.textContent=r.orig===null?'-':toHex(r.orig);
    const tdNew=document.createElement('td');tdNew.textContent=r.new===null?'-':toHex(r.new);
    const tdStatus=document.createElement('td');
    if(r.status==='same'){tdStatus.textContent='same';tdStatus.className='small';}
    else if(r.status==='added'){tdStatus.textContent='added';tdStatus.className='added';}
    else if(r.status==='removed'){tdStatus.textContent='removed';tdStatus.className='removed';}
    else{tdStatus.textContent='changed';tdStatus.className='small';tdOrig.className='changed-old';tdNew.className='changed-new';}
    tr.appendChild(tdIndex);tr.appendChild(tdOrig);tr.appendChild(tdNew);tr.appendChild(tdStatus);
    tbody.appendChild(tr);
  }
  table.appendChild(tbody);
  container.appendChild(table);

  return{
    dom: container,
    visualDom: visualContainer,
    rows: rows
  };
}

// Byte Diff Viewer Event Listeners
document.addEventListener('DOMContentLoaded', function() {
  const leftTA=document.getElementById('left');
  const rightTA=document.getElementById('right');
  const countLeft=document.getElementById('countLeft');
  const countRight=document.getElementById('countRight');
  const res=document.getElementById('result');
  const visualRes = document.getElementById('visual-result');
  let lastRows=[];

  const debouncedUpdateCounts = debounce(function() {
    const l=parseBytes(leftTA.value).length;
    const r=parseBytes(rightTA.value).length;
    countLeft.textContent=l;countRight.textContent=r;
  }, 150);

  if (leftTA && rightTA) {
    leftTA.addEventListener('input', debouncedUpdateCounts);
    rightTA.addEventListener('input', debouncedUpdateCounts);
  }

  if (document.getElementById('compare')) {
    document.getElementById('compare').addEventListener('click',()=>{
      res.innerHTML='';
      visualRes.innerHTML='';
      const left=parseBytes(leftTA.value);
      const right=parseBytes(rightTA.value);
      debouncedUpdateCounts();
      const out=renderDiff(left,right);
      lastRows=out.rows;
      visualRes.appendChild(out.visualDom);
      res.appendChild(out.dom);
    });
  }

  if (document.getElementById('markChanges')) {
    document.getElementById('markChanges').addEventListener('click',()=>{
      const originalRightText = rightTA.value;
      const left=parseBytes(leftTA.value);
      const right=parseBytes(rightTA.value);

      if(left.length === 0 && right.length === 0) {
        alert('‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶¨‡¶ï‡ßç‡¶∏‡ßá ‡¶π‡ßá‡¶ï‡ßç‡¶∏ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶¶‡¶ø‡¶®‡•§');
        return;
      }

      const markedResult = markChangesWithQuestionMarks(left, right, originalRightText);
      rightTA.value = markedResult;
      showToast('Changes marked with ??');
    });
  }

  function showToast(message = 'Copied!'){
    const t=document.getElementById('toast');
    t.textContent = message;
    t.classList.add('show');
    setTimeout(()=>{
      t.classList.remove('show');
      setTimeout(()=>{ t.style.display = 'none'; }, 300);
    }, 1500);
  }

  function copyText(el){navigator.clipboard.writeText(el.value);showToast();}

  if (document.getElementById('upperLeft')) {
    document.getElementById('upperLeft').onclick=()=>{leftTA.value=leftTA.value.toUpperCase();};
  }
  if (document.getElementById('lowerLeft')) {
    document.getElementById('lowerLeft').onclick=()=>{leftTA.value=leftTA.value.toLowerCase();};
  }
  if (document.getElementById('copyLeft')) {
    document.getElementById('copyLeft').onclick=()=>copyText(leftTA);
  }
  if (document.getElementById('upperRight')) {
    document.getElementById('upperRight').onclick=()=>{rightTA.value=rightTA.value.toUpperCase();};
  }
  if (document.getElementById('lowerRight')) {
    document.getElementById('lowerRight').onclick=()=>{rightTA.value=rightTA.value.toLowerCase();};
  }
  if (document.getElementById('copyRight')) {
    document.getElementById('copyRight').onclick=()=>copyText(rightTA);
  }

  function wireFile(btnId,inputId,ta){
    const btn=document.getElementById(btnId);
    const input=document.getElementById(inputId);
    btn.addEventListener('click',()=>input.click());
    input.addEventListener('change',()=>{
      const f=input.files[0];if(!f)return;
      const r=new FileReader();
      r.onload=()=>{ta.value=r.result;debouncedUpdateCounts();};
      r.readAsText(f);
    });
  }

  if (document.getElementById('loadLeft') && document.getElementById('fileLeft')) {
    wireFile('loadLeft','fileLeft',leftTA);
  }
  if (document.getElementById('loadRight') && document.getElementById('fileRight')) {
    wireFile('loadRight','fileRight',rightTA);
  }

  if (document.getElementById('clearLeft')) {
    document.getElementById('clearLeft').onclick=()=>{leftTA.value='';debouncedUpdateCounts();};
  }
  if (document.getElementById('clearRight')) {
    document.getElementById('clearRight').onclick=()=>{rightTA.value='';debouncedUpdateCounts();};
  }

  if (document.getElementById('copyCsv')) {
    document.getElementById('copyCsv').addEventListener('click',()=>{
      if(!lastRows||lastRows.length===0){alert('‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá Compare ‡¶ï‡¶∞‡ßã‡•§');return;}
      const csv=makeCsv(lastRows);
      navigator.clipboard.writeText(csv).then(()=>showToast());
    });
  }

  let vizOn=true;
  if (document.getElementById('visual')) {
    document.getElementById('visual').addEventListener('click',()=>{
      vizOn=!vizOn;
      const elems=document.querySelectorAll('.hex-line, table');
      elems.forEach(e=>e.style.display=vizOn?'block':'none');
    });
  }
});

// Hex Converter Functions
document.addEventListener('DOMContentLoaded', function() {
  const hexInput = document.getElementById('hexInput');
  const convertBtn = document.getElementById('convertBtn');
  const clearHexBtn = document.getElementById('clearHexBtn');
  const hexResult = document.getElementById('hexResult');
  const hexErrorBox = document.getElementById('hexError');
  const copyHexBtn = document.getElementById('copyHexResult');

  function showHexError(msg){
    if (hexErrorBox) {
      hexErrorBox.style.display = 'block';
      hexErrorBox.textContent = msg;
    }
  }

  function clearHexError(){
    if (hexErrorBox) {
      hexErrorBox.style.display = 'none';
      hexErrorBox.textContent = '';
    }
  }

  function formatHex(n){
    if(!Number.isFinite(n)) return 'NaN';
    const hex = Math.abs(n).toString(16).toUpperCase();
    return (n < 0 ? '-0x' : '0x') + hex;
  }

  function convertHex(){
    clearHexError();
    const raw = hexInput.value.trim();
    if(raw === ''){ if (hexResult) hexResult.textContent = '‡¶ï‡¶ø‡¶õ‡ßÅ‡¶á ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶®‡ßá‡¶á ‚Äî ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¶‡¶ø‡¶®‡•§'; return; }

    const hexMatch = raw.match(/^(-?)0[xX]([0-9a-fA-F]+)$/);
    if(hexMatch){
      try{
        const sign = hexMatch[1] === '-' ? -1 : 1;
        const digits = hexMatch[2];
        const val = parseInt(digits, 16);
        if(Number.isNaN(val)) throw new Error('Invalid hex');
        if (hexResult) hexResult.textContent = `${sign * val}`;
        return;
      }catch(e){ showHexError('‡¶π‡ßá‡¶ï‡ßç‡¶∏ ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡¶ø‡¶Ç ‡¶è ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ' + e.message); return; }
    }

    const decMatch = raw.match(/^([+-]?\d+)$/);
    if(decMatch){
      try{
        const n = parseInt(raw, 10);
        if(Number.isNaN(n)) throw new Error('Invalid decimal');
        if (hexResult) hexResult.textContent = formatHex(n);
        return;
      }catch(e){ showHexError('‡¶°‡ßá‡¶∏‡¶ø‡¶Æ‡¶æ‡¶≤ ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡¶ø‡¶Ç ‡¶è ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ' + e.message); return; }
    }

    showHexError('‡¶Ö‡¶¨‡ßà‡¶ß ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‚Äî ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶â‡¶ö‡¶ø‡¶§: 0xA2 (hex) ‡¶¨‡¶æ 162 (decimal)');
  }

  if (convertBtn) { convertBtn.addEventListener('click', convertHex); }
  if (hexInput) { hexInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') convertHex(); }); }
  if (clearHexBtn) {
    clearHexBtn.addEventListener('click', ()=>{ if (hexInput) hexInput.value = ''; if (hexResult) hexResult.textContent = '‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá‡•§'; clearHexError(); if (hexInput) hexInput.focus(); });
  }
  if (copyHexBtn) {
    copyHexBtn.addEventListener('click', async ()=>{
      const txt = hexResult ? hexResult.textContent || '' : '';
      try{
        await navigator.clipboard.writeText(txt);
        copyHexBtn.textContent = 'Copied!';
        setTimeout(()=> copyHexBtn.textContent = 'Copy Result', 1200);
      }catch(e){ copyHexBtn.textContent = 'Copy failed'; setTimeout(()=> copyHexBtn.textContent = 'Copy Result', 1200); }
    });
  }
});

/* --- FIREWORKS SCRIPT (integrated) --- */
/* The fireworks canvas sits behind the UI. Pointer events are disabled by default so UI remains interactive.
   If you'd like to let clicks on the page create fireworks on all clicks, set canvas.style.pointerEvents = 'auto'
   (but UI buttons may then be blocked by the canvas; alternatively listen on document and compute coordinates). */

(function() {
  // Wait until page load to ensure canvas present
  function initFireworks() {
    const canvas = document.getElementById('fireworksCanvas');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');

    // Make sure canvas fills the screen's CSS pixels
    function resize() {
      const dpr = window.devicePixelRatio || 1;
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    resize();
    window.addEventListener('resize', debounce(resize, 120));

    // Arrays for fireworks and explosion particles
    let shells = [];
    let particles = [];

    // Config
    const gravity = 0.05;
    const autoLaunchProbability = 0.03;
    const shellSpeed = 12;
    const particleCount = 120;
    const particleFriction = 0.97;
    const particleGravity = 0.08;
    const trailEffect = 0.15;

    function random(min, max) { return Math.random() * (max - min) + min; }
    function randomColor() { return `hsl(${Math.random() * 360}, 100%, 50%)`; }

    class Shell {
      constructor(x, y, color) {
        this.x = x;
        this.y = y;
        this.color = color || randomColor();
        this.velocity = { x: random(-2, 2), y: random(-shellSpeed, -shellSpeed + 2) };
        this.size = 2.5;
        this.hasExploded = false;
        this.apex = random(window.innerHeight * 0.1, window.innerHeight * 0.4);
      }
      update(i) {
        this.velocity.y += gravity;
        this.x += this.velocity.x;
        this.y += this.velocity.y;
        if (this.y <= this.apex && !this.hasExploded) {
          this.explode();
          this.hasExploded = true;
          shells.splice(i, 1);
        }
      }
      draw() {
        ctx.beginPath();
        ctx.fillStyle = this.color;
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
      explode() {
        for (let i = 0; i < particleCount; i++) particles.push(new ExplosionParticle(this.x, this.y, this.color));
      }
    }

    class ExplosionParticle {
      constructor(x, y, color) {
        this.x = x; this.y = y;
        const hueMatch = color.match(/hsl\((\d+)/);
        const baseHue = hueMatch ? parseInt(hueMatch[1]) : Math.floor(Math.random()*360);
        const hue = random(baseHue - 15, baseHue + 15);
        this.color = `hsl(${hue}, 100%, ${random(50,70)}%)`;
        const angle = random(0, Math.PI * 2);
        const speed = random(1, 8);
        this.velocity = { x: Math.cos(angle) * speed, y: Math.sin(angle) * speed };
        this.size = random(1, 3);
        this.alpha = 1;
      }
      update(i) {
        this.velocity.x *= particleFriction;
        this.velocity.y *= particleFriction;
        this.velocity.y += particleGravity;
        this.x += this.velocity.x;
        this.y += this.velocity.y;
        this.alpha -= 0.015;
        if (this.alpha <= 0) particles.splice(i, 1);
      }
      draw() {
        ctx.save();
        ctx.globalAlpha = this.alpha;
        ctx.beginPath();
        ctx.fillStyle = this.color;
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      }
    }

    function animate() {
      requestAnimationFrame(animate);
      // Clear with slight opacity to create trails
      ctx.fillStyle = `rgba(0, 0, 10, ${trailEffect})`;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      if (Math.random() < autoLaunchProbability) {
        const x = random(window.innerWidth * 0.2, window.innerWidth * 0.8);
        shells.push(new Shell(x, window.innerHeight, null));
      }

      for (let i = shells.length - 1; i >= 0; i--) {
        shells[i].draw();
        shells[i].update(i);
      }

      for (let i = particles.length - 1; i >= 0; i--) {
        particles[i].draw();
        particles[i].update(i);
      }
    }

    // Let clicks/taps create fireworks, but avoid blocking UI:
    // We'll listen on the document, detect clicks that are NOT on interactive elements (buttons, inputs, textareas),
    // and launch fireworks there.
    function isInteractiveTarget(el) {
      if (!el) return false;
      const tag = el.tagName ? el.tagName.toLowerCase() : '';
      if (['button','input','textarea','select','label'].includes(tag)) return true;
      if (el.classList && (el.classList.contains('tab') || el.classList.contains('help-btn') || el.classList.contains('convert-btn') || el.classList.contains('copy-btn'))) return true;
      return el.closest && el.closest('button, input, textarea, select, label, .tab, .help-btn, .convert-btn, .copy-btn');
    }

    document.addEventListener('click', (e) => {
      const target = e.target;
      if (isInteractiveTarget(target)) return; // don't create fireworks if click on UI controls
      // compute coordinates relative to viewport
      const x = e.clientX || (e.touches && e.touches[0] && e.touches[0].clientX) || window.innerWidth/2;
      shells.push(new Shell(x, window.innerHeight, null));
    }, { passive: true });

    // support touchstart similarly
    document.addEventListener('touchstart', (e) => {
      if (!e) return;
      const target = e.target;
      if (isInteractiveTarget(target)) return;
      const touch = e.touches && e.touches[0];
      if (!touch) return;
      shells.push(new Shell(touch.clientX, window.innerHeight, null));
    }, { passive: true });

    // Fade instructions if present (you have none specific to fireworks text; if you add, similar logic applies)
    animate();
  }

  // initialize after slight delay to ensure DOM ready
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    setTimeout(initFireworks, 120);
  } else {
    window.addEventListener('DOMContentLoaded', () => setTimeout(initFireworks, 120));
  }
})();
</script>
</body>
</html>
